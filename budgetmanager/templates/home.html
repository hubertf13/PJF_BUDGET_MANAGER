{% extends "layout.html" %}
{% block content %}
    <div class="card border-dark mb-3">
        <div class="card-body fs-6">
            <div class="row">
                <div class="col">
                    Inflow:
                </div>
                <div class="col text-end">
                    +{{ inflow_sum }}zł
                </div>
            </div>
            <div class="row">
                <div class="col">
                    Outflow:
                </div>
                <div class="col text-end">
                    {{ outflow_sum }}zł
                </div>
            </div>
            <div class="row">
                <div class="col text-end">
                    {{ inflow_sum + outflow_sum }}
                </div>
            </div>
        </div>
    </div>
    {% for cat in category_and_total %}
        {% for tran in transactions %}
            {% if cat[0] == tran[0].category_name %}
                <div class="card border-dark mb-3">
                    <div class="row card-body fs-4">
                        <div class="col fw-bold">
                            {{ cat[0] }}
                        </div>
                        <div class="col">
                            {% if cat[0] == "Salary" or cat[0] == "Other Income" or cat[0] == "Incoming Transfer" %}
                                <div class="col text-end">
                                    Inflow: +{{ cat[1] }}zł
                                </div>
                            {% else %}
                                <div class="col text-end">
                                    Outflow: {{ cat[2] }}zł
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-header fs-5">
                        {% for transaction in tran %}
                            <a style="color: #333333" class="row text-decoration-none" data-bs-toggle="collapse"
                               href="#c{{ transaction.id }}" type="button"
                               aria-expanded="false" aria-controls="collapseExample">
                                <small class="col card-title">{{ transaction.transaction_date.strftime('%d %B, %Y') }}</small>
                                <small class="col card-title text-end">{{ '%0.2f' | format(transaction.amount|float) }}zł</small>
                            </a>
                            <div class="collapse mb-3 mt-1" id="c{{ transaction.id }}">
                                <a class="card-header fs-6 text-muted text-decoration-none">Description</a>
                                <div class="card card-body">
                                    {{ transaction.description }}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% endfor %}
    {% block transactionWindow %}{% endblock %}
{% endblock content %}

